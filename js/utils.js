(()=>{const e={debounce:(e,t=0,o=!1)=>{let n;return(...i)=>{const a=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||e(...i)}),t),a&&e(...i)}},throttle:(e,t,o={})=>{let n,i,a=0;const l=()=>{a=!1===o.leading?0:(new Date).getTime(),n=null,e(...i),n||(i=null)};return(...d)=>{const r=(new Date).getTime();a||!1!==o.leading||(a=r);const s=t-(r-a);i=d,s<=0||s>t?(n&&(clearTimeout(n),n=null),a=r,e(...i),n||(i=null)):n||!1===o.trailing||(n=setTimeout(l,s))}},overflowPaddingR:{add:()=>{const e=window.innerWidth-document.body.clientWidth;if(e>0){document.body.style.paddingRight=`${e}px`,document.body.style.overflow="hidden";const t=document.querySelector("#page-header.nav-fixed #menus");t&&(t.style.paddingRight=`${e}px`)}},remove:()=>{document.body.style.paddingRight="",document.body.style.overflow="";const e=document.querySelector("#page-header.nav-fixed #menus");e&&(e.style.paddingRight="")}},snackbarShow:(e,t=!1,o=2e3)=>{const{position:n,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar,l="light"===document.documentElement.getAttribute("data-theme")?i:a;Snackbar.show({text:e,backgroundColor:l,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const o=new Date,n=new Date(e),i=(o-n)/1e3/60,a=i/60,l=a/24,d=l/30,{dateSuffix:r}=GLOBAL_CONFIG;return t?d>12?n.toISOString().slice(0,10):d>=1?`${Math.floor(d)} ${r.month}`:l>=1?`${Math.floor(l)} ${r.day}`:a>=1?`${Math.floor(a)} ${r.hour}`:i>=1?`${Math.floor(i)} ${r.min}`:r.just:Math.floor(l)},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),o.disconnect())}),{threshold:[0]});o.observe(e)}else t()},scrollToDest:(e,t=500)=>{const o=window.scrollY,n=document.getElementById("page-header").classList.contains("fixed");if((o>e||n)&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});const i=performance.now(),a=n=>{const l=n-i,d=Math.min(l/t,1);window.scrollTo(0,o+(e-o)*d),d<1&&requestAnimationFrame(a)};requestAnimationFrame(a)},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{const o=()=>{e.style.display="",e.style.animation="",e.removeEventListener("animationend",o)};e.addEventListener("animationend",o),e.style.animation=t},wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o))n.setAttribute(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>e.getBoundingClientRect().top+window.scrollY,loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if("medium_zoom"!==t){if("fancybox"===t&&(e.forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,o=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}})),!window.fancyboxRun)){let e="";e=Fancybox.version<"6"?{Hash:!1,Thumbs:{showOnStart:!1},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}:{Hash:!1,Carousel:{transition:"slide",Thumbs:{showOnStart:!1},Toolbar:{display:{left:["counter"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:["autoplay","thumbs","close"]}},Zoomable:{Panzoom:{maxScale:4}}}},Fancybox.bind("[data-fancybox]",e),window.fancyboxRun=!0}}else mediumZoom(e,{background:"var(--zoom-bg)"})},setLoading:{add:e=>{e.insertAdjacentHTML("afterend",'\n        <div class="loading-container">\n          <div class="loading-item">\n            <div></div><div></div><div></div><div></div><div></div>\n          </div>\n        </div>\n      ')},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(()=>{let e,t,o,n;return(i,a)=>{e&&a.clientHeight===e||(e=a.clientHeight,t=window.innerHeight,o=a.offsetTop,n=Math.max(e-t,document.documentElement.scrollHeight-t));const l=(i-o)/n;return Math.max(0,Math.min(100,Math.round(100*l)))}})(),addEventListenerPjax:(e,t,o,n=!1)=>{e.addEventListener(t,o,n),btf.addGlobalFn("pjaxSendOnce",(()=>{e.removeEventListener(t,o,n)}))},removeGlobalFnEvent:(e,t=window)=>{const o=t.globalFn||{},n=o[e];n&&(Object.keys(n).forEach((e=>n[e]())),delete o[e])},switchComments:(e=document,t)=>{const o=e.querySelector("#switch-btn");if(!o)return;let n=!1;const i=e.querySelector("#post-comment");btf.addEventListenerPjax(o,"click",(()=>{i.classList.toggle("move"),n||"function"!=typeof loadOtherComment||(n=!0,loadOtherComment(e,t))}))}};window.btf={...window.btf,...e}})();