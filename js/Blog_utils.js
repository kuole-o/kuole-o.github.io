"use strict";var pathInfo=window.location.pathname;let musicPlaying=!1;const bbtalk_banner_icon={image:'<svg viewBox="0 0 1024 1024" width="21" height="21"><path d="M821.6 120.93333333H195.4c-74.1 0-134.2 60.1-134.2 134.2v492c0 74.1 60.1 134.2 134.2 134.2h626.2c74.1 0 134.2-60.1 134.2-134.2v-492c0-74.1-60.1-134.2-134.2-134.2zM251.3 255.13333333c30.9 0 55.9 25 55.9 55.9s-25 55.9-55.9 55.9-55.9-25-55.9-55.9 25-55.9 55.9-55.9z m614.6 559.1H153.3c-37.3 0-58.2-43.1-35.1-72.4L302.1 508.33333333c17.9-22.7 52.4-22.7 70.3 0l76.5 97.2 148.6-260c17.2-30.1 60.5-30.1 77.7 0L904.8 747.33333333c17 29.8-4.5 66.9-38.9 66.9z"></path></svg>',video:'<svg viewBox="0 0 1025 1024" width="21" height="21"><path d="M892.8 128H131.2c-19.2 0-35.2 6.4-48 22.4-12.8 12.8-19.2 32-19.2 54.4V816c0 44.8 28.8 80 67.2 80h761.6c19.2 0 35.2-6.4 48-22.4s19.2-35.2 19.2-54.4V204.8c0-41.6-32-76.8-67.2-76.8zM224 832h-51.2c-25.6 0-44.8-22.4-44.8-51.2V640h96v192z m0-256h-96V448h96v128z m0-192h-96V243.2c0-28.8 19.2-51.2 44.8-51.2H224v192z m512 32v416H288V192h448v224z m160 364.8c0 28.8-19.2 51.2-44.8 51.2H800V640h96v140.8z m0-204.8h-96V448h96v128z m0-192h-96V192h54.4c22.4 0 41.6 22.4 41.6 51.2V384z" p-id="4200"></path><path d="M444.8 627.2l144-73.6 25.6-12.8c32-16 32-41.6 0-57.6l-169.6-86.4c-16-6.4-28.8 0-28.8 16v192c0 22.4 12.8 28.8 28.8 22.4z" p-id="4201"></path></svg>',music:'<svg viewBox="0 0 1024 1024" width="16" height="16"><path d="M960 0H1024v736c0 88.3712-100.283733 160-224 160S576 824.3712 576 736s100.283733-160 224-160c62.685867 0 119.3472 18.397867 160 48.042667V256l-512 113.783467v494.216533c0 88.3712-100.283733 160-224 160S0 952.3712 0 864s100.283733-160 224-160c62.685867 0 119.3472 18.397867 160 48.042667V128L960 0z"></path></svg>',location:'<svg viewBox="0 0 1025 1024" width="21" height="21"><path d="M512 85.333333a233.386667 233.386667 0 0 0-234.666667 232.746667c0 85.333333 69.973333 185.6 207.573334 308.053333a40.96 40.96 0 0 0 54.186666 0C676.693333 503.68 746.666667 402.56 746.666667 318.08A233.386667 233.386667 0 0 0 512 85.333333z m0 448c-100.053333-91.306667-149.333333-164.266667-149.333333-215.253333a149.333333 149.333333 0 0 1 298.666666 0c0 51.626667-49.066667 124.586667-149.333333 215.253333z" p-id="9700"></path><path d="M933.546667 788.053333l1.92-3.84 1.28-3.84c0-1.28 0-2.56 1.066666-4.053333a33.066667 33.066667 0 0 0 0-6.613333V490.666667a42.666667 42.666667 0 0 0-85.333333 0v249.386666l-251.52 108.16-258.56-159.146666h-1.493333a14.08 14.08 0 0 0-4.053334-1.92l-3.84-1.706667h-24.32l-3.626666 1.28a15.36 15.36 0 0 0-4.266667 1.92h-1.493333L170.666667 759.68V490.666667a42.666667 42.666667 0 0 0-85.333334 0v343.466666a38.4 38.4 0 0 0 0 4.693334 24.746667 24.746667 0 0 0 0 3.84l1.28 4.053333a35.626667 35.626667 0 0 0 1.706667 4.266667 7.68 7.68 0 0 1 0 1.92 36.693333 36.693333 0 0 0 5.973333 7.893333 44.16 44.16 0 0 0 12.373334 7.466667l2.346666 1.493333a42.666667 42.666667 0 0 0 7.253334 2.773333h2.56A39.253333 39.253333 0 0 0 128 874.666667a49.066667 49.066667 0 0 0 9.6 0h2.56a38.186667 38.186667 0 0 0 6.826667-2.773334h1.493333l170.666667-94.506666 256 157.013333c1.92 0 3.84 1.493333 5.546666 2.346667a26.026667 26.026667 0 0 0 5.12 2.133333 42.666667 42.666667 0 0 0 10.453334 1.706667H597.333333a49.493333 49.493333 0 0 0 9.6-1.28l2.986667-1.066667 4.266667-1.28 298.666666-128a40.96 40.96 0 0 0 6.613334-3.84l2.986666-2.346667 3.2-2.773333a39.04 39.04 0 0 0 2.773334-3.413333l2.56-3.2z" p-id="9701"></path><path d="M512 320m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" p-id="9702"></path></svg>',link:'<svg viewBox="0 0 1025 1024" width="21" height="21"><path d="M333.06186 733.061768c-58.347896 52.210106-97.040127 49.051159-136.467091 9.492188l-45.156456-48.462758c-39.427988-39.541575-39.427988-103.667058 0-143.226029l193.260585-193.848986c39.426965-39.558971 103.355973-39.558971 142.78396 0l35.679617 35.794228c30.457686 30.555923 37.398772 75.762521 20.801768 112.997564l86.286202 66.040089c59.149145-59.33027 59.149145-155.517983 0-214.830857L523.162476 249.600755c-59.133795-59.33027-155.010423-59.33027-214.160591 0L44.350342 515.071965c-59.133795 59.313897-59.133795 155.50161 0 214.830857l107.08797 107.415428c59.133795 59.313897 155.026796 59.313897 214.176964 0l102.161774-105.647155-72.980151-70.034053L333.06186 733.061768zM987.196021 285.394982 880.1234 177.979554c-59.149145-59.33027-155.026796-59.33027-214.176964 0 0 0 4.223185-1.064238-57.988716 61.343113l71.113641 68.167542 31.604812-34.877345c39.427988-39.541575 103.356996-39.541575 142.78396 0l35.69599 35.8106c39.427988 39.541575 39.427988 103.667058 0 143.226029L714.818517 632.847345c-39.427988 39.541575-103.340623 39.541575-142.768611 0l-29.395494-48.462758c-61.883419-46.25344-42.865273-57.317427-37.611619-88.544639L426.548044 418.130076c-59.150168 59.33027-59.150168 155.517983 0 214.830857l107.072621 107.432825c59.149145 59.312874 155.026796 59.312874 214.176964 0l239.398392-240.166895C1071.582967 402.924769 987.196021 285.394982 987.196021 285.394982z"></path></svg>'};var guole={bbtalkBanner:async()=>{const e=document.getElementById("bbtalk-list"),t=document.getElementById("bbtalk-loading"),n=document.getElementById("bbtalk-right");if("/"===pathInfo&&e)try{const o=Math.floor(Date.now()/1e3/60),a=await guole.getData({url:"https://cdn.guole.fun/json/bb-json/bbtalk_page1.json",method:"GET",params:{t:o},cacheName:"BBtalk",cacheKey:"list",cacheMinutes:10});let l="";a.results.forEach(((e,t)=>{const n=new Date(e.createdAt),o=guole.formatTime(n),a=timeago.format(o,"zh_CN");l+=`<div class="content swiper-slide">${a}: ${guole.urlToLink(e.content,e.MsgType)}</div>`})),t.style.display="none",t&&t.remove(),n.style.display="unset",e.insertAdjacentHTML("beforeend",l),guole.init_bbtalkBanner()}catch(e){console.error("Fetch error:",e),guole.showIPv6Warning()}},init_bbtalkBanner(){const e=document.querySelector(".bbtalk-list"),t=document.getElementById("bbtalk-banner");if(e){const e=new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:{delay:3e3,pauseOnMouseEnter:!0}});t.onmouseenter=()=>{e.autoplay.stop()},t.onmouseleave=()=>{e.autoplay.start()}}},init_categoryBarBanner(){const e=new Swiper(".blog-slider",{passiveListeners:!0,spaceBetween:30,effect:"fade",loop:!0,autoplay:{disableOnInteraction:!0,delay:5e3},mousewheel:!0,pagination:{el:".blog-slider__pagination",clickable:!0}}),t=document.getElementById("swiper_container");null!==t&&(t.onmouseenter=()=>{e.autoplay.stop()},t.onmouseleave=()=>{e.autoplay.start()})},urlToLink:(e,t)=>{e=e.replace(/<br>/g,"").replace(/<[^>]+>/g,"");return guole.getUrlInfo(e).forEach((n=>{const o=new URL(n.url),a=bbtalk_banner_icon[t]||bbtalk_banner_icon[n.type]||"";e=e.replace(o.href,a)})),e},formatTime:e=>{const t=new Date(e);let n=new Intl.DateTimeFormat("default",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t);return n=n.replace(/\//g,"-"),n},getData:e=>{const{url:t,method:n="GET",params:o={},body:a={},headers:l={},cacheName:c="api-cache",cacheKey:i=`${n}_${t}_${JSON.stringify(o)}_${JSON.stringify(data)}`,cacheMinutes:r=480}=e,s=new AbortController,d=guole.cachedData(c),m=(()=>{const e=d.get(i);if(!e)return null;const t=Date.now();return e.expireTime>t||0===e.expireTime?e.data:null})();return m?Promise.resolve(m):(async()=>{try{const e=new URLSearchParams(o).toString(),c="GET"===n?`${t}?${e}`:t,m={"Content-Type":"application/json",...l},g=await fetch(c,{method:n,headers:m,signal:s.signal,body:"GET"!==n?JSON.stringify(a):null});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const h=await g.json();return d.cache(i,{data:h,expireTime:r>0?Date.now()+60*r*1e3:0}),h}catch(e){throw console.error("Request failed:",e),e}})()},bbtalkRoll:()=>{const e=document.querySelectorAll("#bbtalk-list .content");if(e.length>=2){const t=e[0],n=e[e.length-1];n.parentNode.insertBefore(t,n.nextSibling)}},refreshCache:()=>{location.href("/clean?type=1")},pagePercent:()=>{let e=document.documentElement.scrollTop||window.scrollY,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#percent");n>=0&&n<99?(document.getElementById("nav-totop").classList.remove("long"),o.innerHTML=n):(document.getElementById("nav-totop").classList.add("long"),o.innerHTML="返回顶部")},pageNameRevise:()=>{document.getElementById("page-name-text").innerText=document.title.split(" | Guo Le's Blog")[0]},replaceAll:(e,t,n)=>e.split(t).join(n),switchDarkMode:()=>{const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark",t=document.getElementsByClassName("not-by-ai").length,n=document.getElementById("universe");let o,a;"dark"===e?(btf.activateDarkMode(),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night),o="/img/Written-By-Human-Not-By-AI-Badge-black.svg",a="block"):(btf.activateLightMode(),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day),o="/img/Written-By-Human-Not-By-AI-Badge-white.svg",a="none"),t>0&&(document.getElementsByClassName("not-by-ai")[0].getElementsByTagName("img")[0].src=o),n&&(n.style.display=a),btf.saveToLocal.set("theme",e,2)},categoriesBarActive:()=>{let e=pathInfo;if(e=decodeURIComponent(pathInfo),"/"==e)document.querySelector("#category-bar")&&document.getElementById("首页").classList.add("select");else{let n=/\/categories\/.*?\//.test(e),o=e.split("/");for(let e=0;e<=o.length;e++){e=o.length;var t=o[e-2]}if(n)document.getElementById(t)&&document.getElementById(t).classList.add("select");else{let e;if("game"===t)e="小游戏";document.querySelector("#category-bar")&&document.getElementById(e).classList.add("select")}}guole.categoriesBarNext()},tagsBarActive:()=>{let e=pathInfo;e=decodeURIComponent(pathInfo);let t=/\/tags\/.*?\//.test(e),n=e.split("/");for(let e=0;e<=n.length;e++){e=n.length;var o=n[e-2]}t&&document.getElementById(o)&&document.getElementById(o).classList.add("select"),guole.categoriesBarNext()},scrollCategoryBarToRight:()=>{let e=document.getElementById("category-bar-items"),t=document.getElementById("category-bar-next"),n=e.clientWidth;e&&(e.scrollLeft+e.clientWidth>=e.scrollWidth?(e.scroll({left:0,behavior:"smooth"}),t.innerHTML='<i class="fa-solid fa-chevrons-right"></i>'):e.scrollBy({left:n,behavior:"smooth"}))},categoriesBarNext:()=>{if(document.getElementById("category-bar-items")){let e=document.getElementById("category-bar-items"),t=document.getElementById("category-bar-next");if(e.scrollWidth>e.clientWidth)t.innerHTML='<i class="fa-solid fa-chevrons-right"></i>';else if(t.children[0]){const e=document.querySelector(".category-bar-next i");document.getElementById("category-bar-next").removeChild(e)}}},SwitchReward:()=>{const e=document.querySelector(".reward-main"),t=document.querySelector("button.reward-button.button--animated");"none"===e.style.display?(e.style.display="flex",t.style.background="#425AEF",t.style.boxShadow="0 8px 12px -3px #425AEF40"):(e.style.display="none",t.style.background="var(--guole-red)",t.style.boxShadow="var(--guole-shadow-red)")},topCategoriesBarScroll:()=>{if(document.getElementById("category-bar-items")){let e=document.getElementById("category-bar-items");e.addEventListener("mousewheel",(t=>{let n=-t.wheelDelta/2;e.scrollLeft+=n,t.preventDefault()}),!1)}},sayhi:()=>{document.querySelector("#author-info__sayhi")&&(document.getElementById("author-info__sayhi").innerHTML=guole.getTimeState()+"！我是")},getTimeState:()=>{let e=(new Date).getHours(),t="👋 访客你好";return e<6||24==e?t="😴 夜猫子晚安":e>=6&&e<=10?t="🥪 早上好":e>10&&e<=14?t="☀️ 中午好":e>14&&e<=18?t="🏖️ 下午好":e>18&&e<=23&&(t="🍻 晚上好"),t},changeSayHelloText:()=>{const e=["🤖️ 数码科技爱好者","🔍 善于发现细节","🏠 智能家居小能手","🔨 折腾研究不停歇","🧲 铁骨铮铮郭某人","🙅‍♂ 甜食坚决抵制者","🌦️ 雨中漫步独欢喜","🔥 一腔热血好青年","🏕️ 户外活动冲冲冲","📸 人间美好捕捉师","⚛️ 1% 稀有 INFJ 物种","♋️ 生活全能手巨蟹座","🌊 大海的忠实听众","🕊️ 热爱自由与和平"],t=document.getElementById("author-info__sayhi");let n=e[Math.floor(Math.random()*e.length)],o="";for(;n===o;)n=e[Math.floor(Math.random()*e.length)];t.textContent=n,o=n},addFriendLinksInFooter:()=>{guole.getData({url:"/link.json",method:"GET",cacheName:"link",cacheKey:"list"}).then((e=>{let t=e.map((e=>({name:e.name,link:e.link}))),n=[],o=-1;for(;n.length<4&&t.length>0;){let e=Math.floor(Math.random()*t.length);e===o&&t.length>1||(o=e,n.push(t.splice(e,1)[0]))}let a=n.map((e=>`<a class='footer-item' href='${e.link}' target="_blank" rel="noopener nofollow">${e.name}</a>`)).join("");a+="<a class='footer-item' href='/link/'>更多</a>",document.getElementById("friend-links-in-footer").innerHTML=a}))},travelling:()=>{guole.getData({url:"/link.json",method:"GET",cacheName:"link",cacheKey:"list"}).then((e=>{const t=["郭乐の主页","Guo Le's Blog"],n=e.filter((e=>!t.includes(e.name))),o=n[Math.floor(Math.random()*n.length)],a=o.link,l="点击「前往」按钮访问随机友链（安全性和可用性未知）。本次随机友链：「"+o.name+"」";Snackbar.show({text:l,duration:8e3,pos:"top-center",actionText:"前往",onActionClick:()=>{window.open(a,"_blank")}})})).catch((e=>{console.error("Fetch error:",e)}))},copyPageUrl:()=>{const e=window.location.href;navigator.clipboard.writeText(e).then((()=>{btf.snackbarShow("复制页面 URL 地址成功 ✨✨")}),(()=>{btf.snackbarShow("糟糕，复制失败了。请重试 👽️👽️")}))},qrcodeCreate:()=>{document.getElementById("qrcode")&&(document.getElementById("qrcode").innerHTML="",new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}))},musicToggle:()=>{musicPlaying?(document.querySelector("#nav-music").classList.remove("playing"),document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",musicPlaying=!1):(document.querySelector("#nav-music").classList.add("playing"),musicPlaying=!0),document.getElementById("nav-music").querySelector("meting-js").aplayer.toggle()},moviePageModification:()=>{if("/movies/"===pathInfo){const e=document.getElementById("page-header");e.style.background="unset",e.classList.replace("not-home-page","not-top-img"),document.getElementById("page-site-info").style.display="none"}},initMeting:(e,t,n,o)=>{const a=`<meting-js server="${t}" type="${n}" id="${e}"></meting-js>`;document.getElementById(`${o}`).innerHTML=a},initCommentTips:()=>{if("/bb/"===pathInfo){const e=document.getElementById("post-comment").querySelector(".comment-head");if(e){const t=document.createElement("div");t.className="comment-tips show",t.id="comment-tips",t.innerHTML="<span>✅ 您无需删除空行，直接引用回复以便获得最佳视觉效果</span>",e.appendChild(t)}}},clearCommentInput:()=>{let e=document.getElementsByClassName("el-textarea__inner")[0];if(e){let t=new Event("input",{bubbles:!0,cancelable:!0});e.value="",e.dispatchEvent(t)}},twikooPath:()=>{const e=pathInfo;window.TWIKOO_MAGIC_PATH=e.replace(/index\.html$/,"")},cachedData:e=>{const t=e||"default-cache";return{cache:(e,n)=>{if(!t)throw new Error("Cache name is required");localStorage.setItem(`${t}-${e}`,JSON.stringify(n))},get:e=>{const n=localStorage.getItem(`${t}-${e}`);return n?JSON.parse(n):null},clear:e=>{localStorage.removeItem(`${t}-${e}`)},has:e=>null!==localStorage.getItem(`${t}-${e}`)}},quoteComment:e=>{let t=document.getElementsByClassName("el-textarea__inner")[0],n=new Event("input",{bubbles:!0,cancelable:!0}),o=guole.replaceAll(e,"\n","\n> ");t.value="> "+o+"\n\n",t.dispatchEvent(n);let a=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,a-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&(document.getElementById("comment-tips").style.display="flex")},getUrlInfo:e=>{const t=e.match(/[\u4e00-\u9fa5]+|https?:\/\/[^\s]+/g)||[],n=[];for(let e=0;e<t.length;e++)try{const o=new URL(t[e]),a={url:o.href,type:"url"},l=o.pathname,c=o.hostname;/\.(jpeg|png|jpg|webp|gif)$/i.test(l)?a.type="image":/\.(mp4|ts|flv)$/i.test(l)?a.type="video":(c.includes("y.qq.com")||c.includes("music.163.com")||/\.(mp3|flac|aac|ogg|wav)$/i.test(l))&&(a.type="music"),n.push(a)}catch(e){continue}return n},showIPv6Warning:()=>{const e=guole.cachedData("ipv6Warning"),t=Date.now();let n=e.get("data")||{count:0,expireTime:0};if(n.expireTime<=t&&(n={count:0,expireTime:t+864e5}),!(n.count>=3)){if("undefined"!=typeof GLOBAL_CONFIG&&GLOBAL_CONFIG.Snackbar){const e="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,t=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"😥 本站部分资源仅支持 IPv6 访问。若遇页面异常，请切换网络后重试",backgroundColor:e,duration:5e5,pos:t,actionText:"确认",actionTextColor:"#fff"})}else alert("😥 本站部分资源仅支持 IPv6 访问。若遇页面异常，请切换网络后重试");n.count+=1,e.cache("data",n)}}};guole.twikooPath();